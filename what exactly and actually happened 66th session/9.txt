Now I need to check if currentBoard and currentFen are accessible in this scope:
Action: file_editor view /app/Lichess Bot-AlphaZero-Pure.user.js
Observation: /app/Lichess Bot-AlphaZero-Pure.user.js:
45650|        'b1a3',  // Horrible knight to a3
45651|        'g8h6',  // Horrible knight to h6
45652|        'b8a6',  // Horrible knight to a6
45653|        'a2a3',  // Ultra-passive a3 (except in specific lines)
45654|        'h2h3',  // Often passive h3 (except prophylactic)
45655|        'a7a6',  // Can be okay in Sicilian but often passive
45656|        'h7h6',  // Often passive h6 (except prophylactic)
45657|    ];
45658|    
45659|    // Check for passive moves UNLESS they're part of specific theory
45660|    // For example, d3 is TERRIBLE unless in King's Indian Attack setup
45661|    if (move === 'd2d3' && moveNum <= 3) {
45662|        // d3 on moves 1-3 is almost always passive (except KIA after Nf3)
45663|        debugLog("[PASSIVE]", "ðŸš« Detected passive d3 in early opening!");
45664|        return true;
45665|    }
45666|    
45667|    // Nh3 and Na3 are almost ALWAYS terrible
45668|    if (move === 'g1h3' || move === 'b1a3' || move === 'g8h6' || move === 'b8a6') {
45669|        debugLog("[PASSIVE]", `ðŸš« Detected horrible knight move: ${move}!`);
45670|        return true;
45671|    }
45672|    
45673|    return passiveMoves.includes(move);
45674|}
45675|
45676|/**
45677| * AlphaZero move selection - v17.0.0: ESSENCE MODE + TACTICAL PRECISION
45678| * ENHANCED: With AlphaZero essence overlay and v16 safety validation
45679| */
45680|function applyAlphaZeroLogic(bestMove, alternatives) {
45681|    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
45682|    // v40.31: ABSOLUTE HARD MOVE FILTER â€” REJECT BAD MOVES BEFORE ANY SCORING
45683|    // This filter runs FIRST and REJECTS moves that are absolutely forbidden
45684|    // This is NOT a penalty - the move is EXCLUDED from consideration entirely
45685|    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
45686|    
45687|    if (CONFIG.v40HardMoveFilterEnabled && moveCount <= (CONFIG.v40MaxEarlyMoveNumber || 12)) {
45688|        debugLog("[V40.31_FILTER]", `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`);
45689|        debugLog("[V40.31_FILTER]", `ðŸš« v40.31 HARD MOVE FILTER ACTIVE (move ${moveCount})`);
45690|        
45691|        // Filter function to check if move should be REJECTED
45692|        const shouldRejectMove = (move) => {
45693|            if (!move || move.length < 4) return false;
45694|            
45695|            const fromSquare = move.substring(0, 2);
