There's a hard filter at line 41479 and 41597. But let me see if these filters are actually being applied before moves are sent. Let me check the move selection flow:
Action: file_editor view /app/Lichess Bot-AlphaZero-Pure.user.js
Observation: /app/Lichess Bot-AlphaZero-Pure.user.js:
41470|    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
41471|    // v40.32: BOOK MOVE HARD FILTER â€” CRITICAL FIX!
41472|    // Filter out FORBIDDEN moves from book BEFORE selecting
41473|    // This prevents d2d3, e2e3 from ever being played!
41474|    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
41475|    const isBookMoveForbidden = (move) => {
41476|        if (!CONFIG.v40BookHardFilterEnabled) return false;
41477|        
41478|        // FORBIDDEN: d2d3 in any opening position
41479|        if (CONFIG.v40BookRejectD3 && move === 'd2d3') {
41480|            debugLog("[V40.32_BOOK_FILTER]", `ðŸš«ðŸš«ðŸš« BOOK HARD FILTER: d2d3 is ABSOLUTELY FORBIDDEN!`);
41481|            return true;
41482|        }
41483|        
41484|        // FORBIDDEN: e2e3 in any opening position (unless e4 already played)
41485|        if (CONFIG.v40BookRejectE3 && move === 'e2e3') {
41486|            debugLog("[V40.32_BOOK_FILTER]", `ðŸš«ðŸš«ðŸš« BOOK HARD FILTER: e2e3 is ABSOLUTELY FORBIDDEN!`);
41487|            return true;
41488|        }
41489|        
41490|        // FORBIDDEN: Passive knight moves
41491|        if (CONFIG.v40BookRejectPassiveMoves) {
41492|            const passiveMoves = ['g1h3', 'b1a3', 'g8h6', 'b8a6', 'a2a3', 'h2h3'];
41493|            if (passiveMoves.includes(move)) {
41494|                debugLog("[V40.32_BOOK_FILTER]", `ðŸš« BOOK HARD FILTER: ${move} is passive and FORBIDDEN!`);
41495|                return true;
41496|            }
41497|        }
41498|        
41499|        return false;
41500|    };
41501|    
41502|    // Filter the moves array to remove forbidden moves
41503|    const filteredMoves = moves.filter(m => !isBookMoveForbidden(m.move));
41504|    
41505|    // If all moves are forbidden (shouldn't happen), return null to use engine
41506|    if (filteredMoves.length === 0) {
41507|        debugLog("[V40.32_BOOK_FILTER]", `âš ï¸ ALL book moves filtered out - using engine instead`);
41508|        return null;
41509|    }
41510|    
41511|    // v40.32: FORCE d4/e4 PREFERENCE â€” If d4 or e4 is available, use it!
41512|    if (CONFIG.v40BookForceD4) {
41513|        const d4Move = filteredMoves.find(m => m.move === 'd2d4');
41514|        if (d4Move) {
41515|            debugLog("[V40.32_BOOK_FILTER]", `âœ… FORCE d4: Playing d2d4 (FORCED PREFERENCE)`);
41516|            return 'd2d4';
41517|        }
41518|    }
41519|    
41520|    if (CONFIG.v40BookForceE4) {
