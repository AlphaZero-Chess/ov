The board parsing looks correct. Now let me check what happens in the test games. The key insight is that the filter might be correct but:

1. The `alternatives` array might not contain the Nxd4 move (Stockfish might not suggest it)
2. The filter rejects all moves but the fallback doesn't find the capture

Let me implement more robust v40.48 enhancements:
Action: file_editor view /app/Lichess Bot-AlphaZero-Pure.user.js
Observation: /app/Lichess Bot-AlphaZero-Pure.user.js:
45842|        // v40.47 CRITICAL FIX: If bestMove was rejected and no alternative found, 
45843|        // search through ALL legal moves to find a valid recapture!
45844|        if (bestMoveWasRejected && filteredAlternatives.length === 0) {
45845|            debugLog("[V40.47_FILTER]", `ğŸš¨ ALL moves filtered! Searching for valid recapture...`);
45846|            
45847|            // Find the central square that needs recapturing
45848|            const isWhite = currentFen.includes(' w ');
45849|            const centralSquares = isWhite ? ['d4', 'e4'] : ['d5', 'e5'];
45850|            
45851|            for (const centralSq of centralSquares) {
45852|                const piece = filterBoard.get(centralSq);
45853|                if (!piece || piece.toLowerCase() !== 'p') continue;
45854|                
45855|                const pieceIsWhite = piece === piece.toUpperCase();
45856|                if (pieceIsWhite === isWhite) continue;
45857|                
45858|                // Found enemy pawn - find a piece that can capture it
45859|                for (const alt of alternatives) {
45860|                    const toSq = alt.move.substring(2, 4);
45861|                    if (toSq === centralSq) {
45862|                        debugLog("[V40.47_FILTER]", `âœ… FORCE RECAPTURE: ${alt.move} captures ${centralSq}!`);
45863|                        bestMove = alt.move;
45864|                        bestMoveWasRejected = false;
45865|                        break;
45866|                    }
45867|                }
45868|                if (!bestMoveWasRejected) break;
45869|            }
45870|        }
45871|        
45872|        alternatives = filteredAlternatives.length > 0 ? filteredAlternatives : alternatives;
45873|        
45874|        debugLog("[V40.47_FILTER]", `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`);
45875|    }
45876|    
45877|    // Don't be creative if we only have one option
45878|    if (alternatives.length < 2) {
45879|        return bestMove;
45880|    }
