Now I'll implement a comprehensive upgrade to make this a TRUE AlphaZero replica. The key issues are:

1. **v40 only has 15% influence** - needs to be much higher (50%+)
2. **Missing deep mating net detection** - need to detect patterns like the Ra1# 
3. **Missing queen movement penalty** - too many queen moves in opening
4. **Missing file control evaluation** - didn't see c-file invasion
5. **Missing initiative collapse detection** - lost tempo but didn't react
Action: file_editor str_replace /app/Lichess Bot-AlphaZero-Pure.user.js --old-str "        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // v40.0.0: TRUE ALPHAZERO SUPERHUMAN BEAST INTEGRATION
        // Add v40's deep positional/strategic/tactical evaluation
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let v40Bonus = 0;
        if (CONFIG.v40Enabled && fen) {
            try {
                // Get v40 superhuman beast evaluation (normalized to ~100cp scale)
                const v40Score = v40SuperhumanBeastEvaluate(fen, move, 100);
                // Scale v40 score contribution (weighted at 15% influence)
                v40Bonus = v40Score * 0.15;
                
                debugLog(\"[V40_INTEGRATE]\", `Move ${move}: v40Score=${v40Score.toFixed(1)} â†’ bonus=${v40Bonus.toFixed(1)}cp`);
            } catch (e) {
                debugLog(\"[V40_INTEGRATE]\", `âš ï¸ v40 evaluation error: ${e.message}`);
                v40Bonus = 0;
            }
        }
        
        // TRUE ALPHAZERO weighted merge WITH v40 superhuman bonus
        const combinedScore = (
            TRUE_ALPHAZERO.qWeight * engine_Q +
            TRUE_ALPHAZERO.rolloutWeight * rollout_Q +
            normalizedPolicyPrior + // Policy as bonus, not multiplied by weight
            v40Bonus                // v40 superhuman beast contribution
        );
        
        debugLog(\"[Q+POLICY]\", `Move ${move}: Q=${engine_Q.toFixed(1)}cp, rollout=${rollout_Q.toFixed(1)}cp, policy=${policyPrior.toFixed(3)}, v40=${v40Bonus.toFixed(1)} â†’ combined=${combinedScore.toFixed(1)}cp`);
        
        return combinedScore;" --new-str "        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // v40.1.0: TRUE ALPHAZERO SUPERHUMAN BEAST INTEGRATION â€” PARADIGM SHIFT
        // CRITICAL: v40 now has 55% DOMINANT INFLUENCE â€” this IS the superhuman
        // Add v40's deep positional/strategic/tactical evaluation
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let v40Bonus = 0;
        let v40DeepScore = 0;
        let v40MatingNetPenalty = 0;
        let v40FileControlBonus = 0;
        let v40InitiativeBonus = 0;
        
        if (CONFIG.v40Enabled && fen) {
            try {
                // Get v40 superhuman beast evaluation (normalized to ~100cp scale)
                const v40Score = v40SuperhumanBeastEvaluate(fen, move, 100);
                
                // v40.1: Enhanced deep evaluations
                const board = parseFenToBoard(fen);
                const activeColor = fen.split(' ')[1];
                const moveNumber = parseInt(fen.split(' ')[5]) || 1;
                
                // v40.1: DEEP MATING NET DETECTION (prevents Ra1# type disasters)
                v40MatingNetPenalty = v40DeepMatingNetDetection(fen, move, board, activeColor) * 0.5;
                
                // v40.1: FILE CONTROL EVALUATION (prevents c-file invasion blindness)
                v40FileControlBonus = v40FileControlEvaluation(fen, move, board, activeColor) * 0.3;
                
                // v40.1: INITIATIVE TRACKING (prevents initiative collapse)
                v40InitiativeBonus = v40DeepInitiativeTracking(fen, move, board, activeColor, moveNumber) * 0.4;
                
                // v40.1: QUEEN MOVEMENT PENALTY (prevents Qd1-Qd3-Qe4-Qd3 disasters)
                const queenPenalty = v40QueenMovementPenalty(fen, move, board, activeColor, moveNumber);
                
                // v40.1: COMBINED v40 SCORE â€” 55% DOMINANT INFLUENCE (was 15%)
                // This makes v40 the DOMINANT factor in move selection
                v40DeepScore = v40Score + v40MatingNetPenalty + v40FileControlBonus + v40InitiativeBonus + queenPenalty;
                v40Bonus = v40DeepScore * 0.55;  // 55% influence â€” PARADIGM SHIFT
                
                debugLog(\"[V40_INTEGRATE]\", `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`);
                debugLog(\"[V40_INTEGRATE]\", `ğŸ¦ SUPERHUMAN BEAST v40.1 DOMINANT EVALUATION`);
                debugLog(\"[V40_INTEGRATE]\", `Move ${move}:`);
                debugLog(\"[V40_INTEGRATE]\", `   Base v40: ${v40Score.toFixed(1)}`);
                debugLog(\"[V40_INTEGRATE]\", `   MatingNet: ${v40MatingNetPenalty.toFixed(1)}`);
                debugLog(\"[V40_INTEGRATE]\", `   FileControl: ${v40FileControlBonus.toFixed(1)}`);
                debugLog(\"[V40_INTEGRATE]\", `   Initiative: ${v40InitiativeBonus.toFixed(1)}`);
                debugLog(\"[V40_INTEGRATE]\", `   QueenPenalty: ${queenPenalty.toFixed(1)}`);
                debugLog(\"[V40_INTEGRATE]\", `   TOTAL v40: ${v40DeepScore.toFixed(1)} â†’ 55% bonus=${v40Bonus.toFixed(1)}cp`);
                debugLog(\"[V40_INTEGRATE]\", `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`);
            } catch (e) {
                debugLog(\"[V40_INTEGRATE]\", `âš ï¸ v40 evaluation error: ${e.message}`);
                v40Bonus = 0;
            }
        }
        
        // v40.1: TRUE ALPHAZERO weighted merge â€” v40 DOMINANT (55%)
        // Engine provides baseline, but v40 superhuman evaluation is PRIMARY
        const combinedScore = (
            TRUE_ALPHAZERO.qWeight * engine_Q * 0.45 +  // Engine reduced to 45%
            TRUE_ALPHAZERO.rolloutWeight * rollout_Q * 0.45 +
            normalizedPolicyPrior * 0.8 + // Policy bonus slightly reduced
            v40Bonus                      // v40 DOMINANT at 55%
        );
        
        debugLog(\"[Q+POLICY]\", `Move ${move}: Q=${engine_Q.toFixed(1)}cp, rollout=${rollout_Q.toFixed(1)}cp, policy=${policyPrior.toFixed(3)}, v40=${v40Bonus.toFixed(1)} â†’ combined=${combinedScore.toFixed(1)}cp`);
        
        return combinedScore;"
Observation: Edit was successful.